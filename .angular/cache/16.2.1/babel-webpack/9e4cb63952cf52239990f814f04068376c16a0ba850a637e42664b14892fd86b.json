{"ast":null,"code":"import _asyncToGenerator from \"D:/r/class record/TDH APP/cyber-mobile/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Filesystem, Directory } from \"@capacitor/filesystem\";\n/* ES6 */\nimport * as htmlToImage from 'html-to-image';\nimport html2canvas from \"html2canvas\";\nimport { AuthService } from \"src/app/services/auth.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/global.service\";\nimport * as i2 from \"src/app/services/my-course.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"../../../../shared/components/slide-header/slide-header.component\";\nconst _c0 = [\"certificateImg\"];\nlet CertificatePage = /*#__PURE__*/(() => {\n  var _class;\n  class CertificatePage {\n    get name() {\n      return AuthService.user.name;\n    }\n    get vNo() {\n      return this.curse?.certificateNo;\n    }\n    constructor(globalService, myCourse, ac) {\n      this.globalService = globalService;\n      this.myCourse = myCourse;\n      this.ac = ac;\n      this.imageUrl = \"https://s3-alpha-sig.figma.com/img/afb7/53d1/0e4ca220494ba9417d820a08063a598f?Expires=1694995200&Signature=EtZNoctAwm7~owN147oVsLQKB8AH4V2KfZyl4bWa8rismCdd~RnBlnSiusy8fXMqpCcNprInGKUAzwHRnTrvZdXjPNmVTmTXiPp2CuRUVCU1B~qVX5GMCBZ6zF9jpEUlVS7-i98uyk3AbYyPJ1ONkVi1rlrH-WvARjLrHjnHijpvw037-Ldia23tJ8a5ZjEa6YOoalBUaKUSiahl1NCRbj8oyLmfp2Z-Vc~lc-FUidAeFTX37nQ1BeqekejRQeeNSv8pUFH6VePimieXYQWE8zzvrByW67x~JJNC3RiO5XwmRi-kjXHKC-uSQBaeNPYlCdjsTpOKOUjSZtSI5oWUjQ__&Key-Pair-Id=APKAQ4GOSFWCVNEHN3O4\";\n    }\n    ngOnInit() {\n      return _asyncToGenerator(function* () {\n        yield Filesystem.requestPermissions();\n      })();\n    }\n    ionViewWillEnter() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.getInfo();\n        console.log(_this.curse);\n      })();\n    }\n    getInfo() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const id = _this2.ac.snapshot.paramMap.get(\"id\");\n          console.log(id);\n          if (!id) return;\n          _this2.curse = yield _this2.myCourse.getMyCourse(+id);\n        } catch (error) {}\n      })();\n    }\n    // async downloadCert() {\n    //   html2canvas(document.querySelector('#certificateImg')!).then(async (canvas) => {\n    //     const result = await this.globalService.writeFile({\n    //       data: canvas.toDataURL('image/png'),\n    //       path: \"certificate.png\",\n    //     });\n    //     // alert(JSON.stringify(result));\n    //   })\n    //   // const reader = new FileReader();\n    //   // let base64data;\n    //   // reader.onloadend = () => {\n    //   //   base64data = reader.result;\n    //   //   console.log(base64data);\n    //   // };\n    //   // reader.readAsDataURL(image);\n    //   // console.log(image);\n    // }\n    shareCert() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        html2canvas(document.querySelector('#certificateImg'), {\n          height: 500\n        }).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (canvas) {\n            const file = yield _this3.globalService.writeFile({\n              path: \"cert.png\",\n              data: canvas.toDataURL(),\n              directory: Directory.Cache\n            });\n            const result = yield _this3.globalService.share({\n              dialogTitle: \"Share your Certificate\",\n              files: [file.uri]\n            });\n            // alert(JSON.stringify(result));\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      })();\n    }\n    getBase64ImageFromUrl() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        var res = yield fetch(_this4.imageUrl);\n        var blob = yield res.blob();\n        var mynode = document.getElementById('image-section');\n        if (mynode) {\n          return yield htmlToImage.toPng(mynode);\n        }\n        return new Promise((resolve, reject) => {\n          var reader = new FileReader();\n          reader.addEventListener(\"load\", function () {\n            resolve(reader.result);\n          }, false);\n          reader.onerror = () => {\n            return reject(_this4);\n          };\n          reader.readAsDataURL(blob);\n        });\n      })();\n    }\n  }\n  _class = CertificatePage;\n  _class.ɵfac = function CertificatePage_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.GlobalService), i0.ɵɵdirectiveInject(i2.MyCourseService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-certificate\"]],\n    viewQuery: function CertificatePage_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.certificate = _t.first);\n      }\n    },\n    decls: 24,\n    vars: 3,\n    consts: [[1, \"shadow-none\", \"z-40\"], [\"id\", \"image-section\"], [1, \"pt-5\", \"pb-5\", \"animate__animated\", \"animate__fadeInDown\"], [1, \"title\", \"ml-10\"], [1, \"animate__bounceInUp\", \"animate__animated\", 3, \"fullscreen\"], [1, \"h-full\", \"px-6\", \"justify-center\", \"items-center\", \"flex\", \"flex-col\"], [1, \"mt-auto\"], [1, \"flex\", \"justify-center\"], [\"id\", \"certificateImg\", 1, \"relative\", \"flex\", \"flex-col\", \"max-w-fit\", \"h-[500px]\"], [\"src\", \"/assets/images/cert.jpg\", \"alt\", \"\", 1, \"h-[500px]\", \"object-contain\", \"self-center\", \"max-w-sm\", \"rounded-lg\", \"shadow-lg\", \"-z-10\"], [1, \"absolute\", \"right-1/3\", \"translate-x-1/2\", \"text-lg\", \"font-bold\", \"top-[45%]\", \"text-black\"], [1, \"absolute\", \"right-[20%]\", \"translate-x-1/2\", \"text-lg\", \"font-bold\", \"top-[67%]\", \"text-black\"], [1, \"mt-5\"], [1, \"font-medium\", \"text-sm\", \"text-center\"], [1, \"mt-auto\", \"mb-4\", \"flex\", \"gap-3\", \"w-full\"], [1, \"bg-indigo-400\", \"flex\", \"justify-center\", \"items-center\", \"rounded-xl\", \"shadow\", \"flex-1\", \"py-2\", \"w-full\", 3, \"click\"], [\"name\", \"share-social-outline\", \"size\", \"large\", 1, \"mr-3\"]],\n    template: function CertificatePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"slide-header\", 0);\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"h1\", 3);\n        i0.ɵɵtext(4, \"My Certificate\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(5, \"ion-content\", 4)(6, \"section\", 5)(7, \"div\");\n        i0.ɵɵtext(8, \"\\u00A0\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7)(11, \"div\", 8);\n        i0.ɵɵelement(12, \"img\", 9);\n        i0.ɵɵelementStart(13, \"span\", 10);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"span\", 11);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\", 12)(18, \"p\", 13);\n        i0.ɵɵtext(19, \" You can share your course certificate in any kinds of profile,on printed resumes, CVs, or others documents. \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"div\", 14)(21, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function CertificatePage_Template_button_click_21_listener() {\n          return ctx.shareCert();\n        });\n        i0.ɵɵelement(22, \"ion-icon\", 16);\n        i0.ɵɵtext(23, \" Share \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate1(\" \", ctx.name, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.vNo, \" \");\n      }\n    },\n    dependencies: [i4.IonContent, i4.IonIcon, i5.SlideHeaderComponent],\n    styles: [\".title[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:22px;line-height:27px;display:flex;align-items:center}\"]\n  });\n  return CertificatePage;\n})();\nexport { CertificatePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}