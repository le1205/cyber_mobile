{"ast":null,"code":"import _asyncToGenerator from \"D:/r/class record/TDH APP/cyber-mobile/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/quiz.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../../shared/components/slide-header/slide-header.component\";\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"correct\": a0,\n    \"misstake\": a1,\n    \"un-ansver\": a2\n  };\n};\nfunction QuizComponent_div_23_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵlistener(\"click\", function QuizComponent_div_23_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.select(item_r2));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 24);\n    i0.ɵɵelementStart(2, \"p\", 25);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(2, _c0, (ctx_r1.selected == null ? null : ctx_r1.selected.question_number) == ctx_r1.question.currectId && (ctx_r1.selected == null ? null : ctx_r1.selected.question_number) == item_r2.question_number, (ctx_r1.selected == null ? null : ctx_r1.selected.question_number) != ctx_r1.question.currectId && (ctx_r1.selected == null ? null : ctx_r1.selected.question_number) == item_r2.question_number, !ctx_r1.selected && ctx_r1.question.currectId == item_r2.question_number));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.question_answer, \" \");\n  }\n}\nfunction QuizComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, QuizComponent_div_23_div_1_Template, 4, 6, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.question == null ? null : ctx_r0.question.answers);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    finish: a0\n  };\n};\nconst _c2 = function (a0) {\n  return {\n    width: a0\n  };\n};\nlet QuizComponent = /*#__PURE__*/(() => {\n  var _class;\n  class QuizComponent {\n    get minutes() {\n      return Math.max(0, Math.floor(this.time / 60));\n    }\n    get seconds() {\n      return Math.max(0, this.time % 60);\n    }\n    get selected() {\n      return this.question?.selected;\n    }\n    get isFinish() {\n      return this.quiz && this.quiz.questions && this.quiz.questions.length - 1 <= this.index;\n    }\n    get question() {\n      return this.quiz?.questions[this.index];\n    }\n    get percentage() {\n      if (!this.quiz) return 0;\n      if (this.quiz.questions) return (this.index + 1) / this.quiz.questions.length * 100;\n      return 0;\n    }\n    constructor(quizSerivice, ac, alertController, navController) {\n      this.quizSerivice = quizSerivice;\n      this.ac = ac;\n      this.alertController = alertController;\n      this.navController = navController;\n      this.unAnsvered = false;\n      this.index = 0;\n      this.time = 0;\n    }\n    ionViewWillEnter() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.getQuestions();\n        _this.cancelTimeToken = setInterval(() => {\n          _this.time--;\n          if (_this.time <= 0) {\n            if (_this.cancelTimeToken != undefined && _this.cancelTimeToken != null) clearInterval(_this.cancelTimeToken);\n            _this.finishQuiz();\n          }\n        }, 1000);\n      })();\n    }\n    ionViewWillLeave() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.cancelTimeToken) clearInterval(_this2.cancelTimeToken);\n      })();\n    }\n    getQuestions() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const curseId = _this3.ac.snapshot.paramMap.get('curseId');\n          const quizId = _this3.ac.snapshot.paramMap.get('quizId');\n          if (!curseId || !quizId) return;\n          _this3.quiz = yield _this3.quizSerivice.getQuize(+curseId, +quizId);\n          if (_this3.quiz) _this3.time = _this3.quiz.time;\n          _this3.index = 0;\n        } catch (error) {}\n      })();\n    }\n    select(e) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this4.question || !_this4.quiz || !!_this4.question.selected) return;\n        _this4.question.selected = e;\n      })();\n    }\n    finishQuiz() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this5.quiz) return;\n        const answers = _this5.quiz.questions.map(el => el.selected);\n        yield _this5.quizSerivice.finishQuiz(_this5.quiz.id, answers);\n        const alert = yield _this5.alertController.create({\n          header: \"Quiz Finished\",\n          message: \"Congratulation You are complete the quiz.\",\n          buttons: [{\n            text: 'Ok',\n            handler: () => {\n              _this5.navController.navigateRoot(\"/home\");\n            }\n          }]\n        });\n        yield alert.present();\n      })();\n    }\n    next() {\n      var _this6 = this;\n      return _asyncToGenerator(function* () {\n        if (_this6.isFinish) {\n          yield _this6.finishQuiz();\n        } else _this6.index++;\n      })();\n    }\n  }\n  _class = QuizComponent;\n  _class.ɵfac = function QuizComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.QuizService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AlertController), i0.ɵɵdirectiveInject(i3.NavController));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-quiz\"]],\n    decls: 33,\n    vars: 14,\n    consts: [[1, \"shadow-none\", \"animate__bounceInDown\", \"animate__animated\"], [1, \"flex\", \"justify-start\", \"py-10\", \"pl-5\"], [\"fill\", \"clear\"], [\"color\", \"dark\", \"size\", \"large\", \"name\", \"chevron-back-outline\"], [1, \"title\", \"text-[var(--ion-text-color)]\", \"ml-10\"], [1, \"animate__bounceInUp\", \"animate__animated\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mx-4\"], [1, \"flex\", \"justify-between\", \"mt-3\"], [1, \"text-sm\"], [1, \"flex\", \"justify-between\", \"timer\"], [1, \"border-b\", \"rounded-b-md\", \"w-12\", \"h-12\", \"border-[var(--ion-color-primary-rgb)]\", \"text-2xl\", \"flex\", \"justify-center\", \"items-center\", \"mr-2\"], [1, \"border-b\", \"rounded-b-md\", \"border-[var(--ion-color-primary-rgb)]\", \"w-12\", \"h-12\", \"text-2xl\", \"flex\", \"justify-center\", \"items-center\"], [1, \"text-xl\", \"mt-4\", \"px-4\"], [\"class\", \"flex flex-col  px-5 \", 4, \"ngIf\"], [1, \"shadow-none\"], [1, \"flex\", \"justify-center\"], [\"fill\", \"clear\", \"size\", \"large\", 1, \"flex-auto\", \"mx-8\", \"mb-5\", \"shadow-none\", \"text-xl\", \"text-[var(--ion-color-primary-rgb)]\", 3, \"ngClass\", \"click\"], [1, \"flex\", \"justify-center\", \"mb-4\", \"text-center\", \"text-[var(--ion-text-color)]\"], [1, \"flex\", \"justify-center\", \"mb-4\"], [1, \"w-[50%]\", \"bg-[var(--solid-darker-background)]\", \"h-1\", \"rounded-full\"], [1, \"bg-[var(--background)]\", \"h-1\", \"rounded-full\", 3, \"ngStyle\"], [1, \"flex\", \"flex-col\", \"px-5\"], [\"class\", \"rounded-md bg-[var(--ion-background)] flex justify-start items-center min-h-fit py-1 mt-4\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"rounded-md\", \"bg-[var(--ion-background)]\", \"flex\", \"justify-start\", \"items-center\", \"min-h-fit\", \"py-1\", \"mt-4\", 3, \"ngClass\", \"click\"], [\"name\", \"checkmark-circle\", 1, \"mx-2\", \"opacity-0\", \"text-4xl\"], [1, \"text-md\", \"text-[var(--ion-text-color)]\"]],\n    template: function QuizComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"slide-header\", 0)(1, \"div\", 1)(2, \"ion-button\", 2);\n        i0.ɵɵelement(3, \"ion-icon\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"h3\", 4);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 5)(7, \"section\", 6)(8, \"div\", 7)(9, \"div\")(10, \"p\", 8);\n        i0.ɵɵtext(11, \"Time\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 9)(13, \"div\", 10)(14, \"p\");\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 11)(17, \"p\");\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(19, \"section\")(20, \"p\", 12);\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"section\");\n        i0.ɵɵtemplate(23, QuizComponent_div_23_Template, 2, 1, \"div\", 13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"ion-footer\", 14)(25, \"div\", 15)(26, \"ion-button\", 16);\n        i0.ɵɵlistener(\"click\", function QuizComponent_Template_ion_button_click_26_listener() {\n          return ctx.next();\n        });\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"div\", 17);\n        i0.ɵɵtext(29);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 18)(31, \"div\", 19);\n        i0.ɵɵelement(32, \"div\", 20);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.quiz == null ? null : ctx.quiz.title, \" \");\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\" \", ctx.minutes, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.seconds, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.question == null ? null : ctx.question.title, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.question);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c1, ctx.isFinish));\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", !ctx.isFinish ? \"Next\" : \"Finish Quiz\", \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate2(\" \", ctx.index + 1, \" - \", ctx.quiz == null ? null : ctx.quiz.questions == null ? null : ctx.quiz.questions.length, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(12, _c2, ctx.percentage + \"%\"));\n      }\n    },\n    dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i4.NgStyle, i3.IonButton, i3.IonContent, i3.IonFooter, i3.IonIcon, i5.SlideHeaderComponent],\n    styles: [\".correct[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{opacity:100;color:green}.misstake[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{opacity:100;color:red}.title[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:22px;line-height:27px;display:flex;align-items:center}.bg-segment[_ngcontent-%COMP%]{background:linear-gradient(to right,#D6FCF9,rgba(121,250,100,.0784313725))}.card-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-style:normal;font-weight:500;font-size:14px;line-height:24px;display:flex;align-items:center}.card-sb-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-style:normal;font-weight:500;font-size:13px;line-height:24px;display:flex;align-items:center}.yuzde[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-style:normal;font-weight:500;font-size:10px;line-height:12px;display:flex;align-items:center}.yildiz[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-style:normal;font-weight:500;font-size:10px;line-height:12px;display:flex;align-items:center;text-align:right}.bg[_ngcontent-%COMP%]{border-radius:6px}ion-button[_ngcontent-%COMP%]{text-transform:none}ion-segment-button[_ngcontent-%COMP%]{text-transform:none;font-family:Source Sans Pro;font-style:normal;font-weight:500;font-size:16px;line-height:24px}.finish[_ngcontent-%COMP%]{--ion-color-primary: var(--ion-background) !important;transition:background-color .5s ease}\"]\n  });\n  return QuizComponent;\n})();\nexport { QuizComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}